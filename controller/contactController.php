<?php

class contactController extends BaseController {

  private $contactModel;
  
  public function __construct($registry) {
    parent::__construct($registry);
    $this->contactModel = new Contacts($this->mysqli);
  }
  
  public function index() 
  {
    $json_contacts = $this->contactModel->index();
    $this->registry->template->json_contacts = $json_contacts;
    $this->registry->template->show('show_contact');
  }

  public function create()
  {
    $contact = $this->contactModel->create($_POST);
    $this->registry->template->json_contacts = json_encode([$contact]);
    $this->registry->template->show('show_contact');
  }
  
  public function update() {
    $contact = $this->contactModel->update($_POST);
    $this->registry->template->json_contacts = json_encode([$contact]);
    $this->registry->template->show('show_contact');
  }

  public function destroy() {
    $id = $_POST['id'];
    $this->contactModel->destroy($id);
    return true;
  }
  
  public function view()
  {
    $this->registry->template->blog_heading = 'View Contact';
    $this->registry->template->blog_content = 'Content';
    $this->registry->template->show('blog_view');
  }

}
?>
